import{_ as e,a,h as l,i as t,j as o,k as r,o as s,c as n,l as i,m as d,d as u,n as v,F as c,p,b as f,t as h,s as b,q as g,z as m,g as x}from"./index.3e609359.js";const _={class:"grid gap-15 grid-cols-3 box"};var y=e({__name:"index",setup(e){const{proxy:y}=x(),k=a(),w=l({state:"open",page:1,per_page:12});let $=l([]),C=l(!1),I=l(!1),M=l(!1),T=l(),j=l();t((()=>T.value.scrollTop=j.value)),o((()=>j.value=T.value.scrollTop));const z=()=>{y.$blogApi.resolve("giteeIssues",w.value).then((e=>{C.value=!1,(null==e?void 0:e.length)?(e.length<12?I.value=!0:w.value.page++,e.forEach((e=>{const a=e.created_at.split("-"),l=a[0]+"年"+a[1]+"月";let t=!1;e.created_at=y.$format(e.created_at,"zh_CN").replace(/\s/,"");const o=Math.floor(Math.random()*k.palette.length);if(e.color=k.palette[o],$.value){for(let a=0;a<$.value.length;a++)if(l===$.value[a].ym){t=!0,$.value[a].data.push(e),$.value[a].color=k.palette[o];break}t||$.value.push({ym:l,data:[e]})}else $.value=[{ym:l,data:[e]}]}))):(null==e?void 0:e.length)?(M.value=!0,C.value=!1):I.value=!0})).catch((e=>{y.$toast(`请求失败${e}`),M.value=!0,C.value=!1}))},A=()=>{k.scrollBox=T.value;const e=T.value.scrollHeight-T.value.offsetHeight,a=T.value.scrollTop;k.percentage=parseInt(a/e*100)};return(e,a)=>{const l=r("ArticleCard"),t=r("van-list");return s(),n("div",{class:"vanlist p-15 overflow-auto fixed top-60 left-0 right-0 bottom-0",ref_key:"scrollBox",ref:T,onScroll:A},[i(t,{loading:u(C),"onUpdate:loading":a[0]||(a[0]=e=>v(C)?C.value=e:C=e),error:u(M),"onUpdate:error":a[1]||(a[1]=e=>v(M)?M.value=e:M=e),finished:u(I),"finished-text":`总共 ${u(k).articleCount} 条，没有了哦 ฅ ̳͒•ˑ̫• ̳͒ฅ`,"error-text":"请求失败，点击重新加载",onLoad:z},{default:d((()=>[u($).length?(s(!0),n(c,{key:0},p(u($),((e,a)=>(s(),n("div",{class:"bg-white/70 mb-15 ml-15 rounded-5 p-15 pt-60 relative",key:a},[f("div",{class:"w-120 h-30 lh-30 absolute top-15 left--15 text-center text-white rounded-r-5 bg-primary select-none before:content-none before:inline-block before:absolute before:top-30 before:left-0 before:border-t-15 before:border-t-divider-1 before:border-l-15 before:border-l-transparent",style:b({backgroundColor:e.color})},h(e.ym),5),f("div",_,[(s(!0),n(c,null,p(e.data,(e=>(s(),g(l,{key:e.id,article:e},null,8,["article"])))),128))])])))),128)):m("v-if",!0)])),_:1},8,["loading","error","finished","finished-text"])],544)}}},[["__scopeId","data-v-6783f064"],["__file","D:/MyWork/blog-vue3/src/views/archives/index.vue"]]);export{y as default};
