import{r as e,a5 as a,a6 as t,q as l,o,c as r,s,v as n,e as d,i,F as u,f as v,b as c,t as f,k as p,x as b,j as h,y as g}from"./vendor.61ae407d.js";import{_ as m,u as x}from"./index.56641dfb.js";const y={class:"grid gap-15 grid-cols-3 box"};var _=m({setup(m){const{proxy:_}=g(),k=x(),$=e({state:"open",page:1,per_page:12});let w=e([]),C=e(!1),j=e(!1),I=e(!1),T=e(),A=e();a((()=>T.value.scrollTop=A.value)),t((()=>A.value=T.value.scrollTop));const B=()=>{_.$blogApi.resolve("giteeIssues",$.value).then((e=>{C.value=!1,(null==e?void 0:e.length)?(e.length<12?j.value=!0:$.value.page++,e.forEach((e=>{const a=e.created_at.split("-"),t=a[0]+"年"+a[1]+"月";let l=!1;e.created_at=_.$format(e.created_at,"zh_CN").replace(/\s/,"");const o=Math.floor(Math.random()*k.palette.length);if(e.color=k.palette[o],w.value){for(let a=0;a<w.value.length;a++)if(t===w.value[a].ym){l=!0,w.value[a].data.push(e),w.value[a].color=k.palette[o];break}l||w.value.push({ym:t,data:[e]})}else w.value=[{ym:t,data:[e]}]}))):(null==e?void 0:e.length)?(I.value=!0,C.value=!1):j.value=!0})).catch((e=>{_.$toast(`请求失败${e}`),I.value=!0,C.value=!1}))},H=()=>{k.scrollBox=T.value;const e=T.value.scrollHeight-T.value.offsetHeight,a=T.value.scrollTop;k.percentage=parseInt(a/e*100)};return(e,a)=>{const t=l("ArticleCard"),g=l("van-list");return o(),r("div",{class:"vanlist p-15 overflow-auto fixed top-60 left-0 right-0 bottom-0",ref_key:"scrollBox",ref:T,onScroll:H},[s(g,{loading:d(C),"onUpdate:loading":a[0]||(a[0]=e=>i(C)?C.value=e:C=e),error:d(I),"onUpdate:error":a[1]||(a[1]=e=>i(I)?I.value=e:I=e),finished:d(j),"finished-text":`总共 ${d(k).articleCount} 条，没有了哦 ฅ ̳͒•ˑ̫• ̳͒ฅ`,"error-text":"请求失败，点击重新加载",onLoad:B},{default:n((()=>[d(w).length?(o(!0),r(u,{key:0},v(d(w),((e,a)=>(o(),r("div",{class:"bg-white/70 mb-15 ml-15 rounded-5 p-15 pt-60 relative",key:a},[c("div",{class:"w-120 h-30 lh-30 absolute top-15 left--15 text-center text-white rounded-r-5 bg-primary select-none before:content-none before:inline-block before:absolute before:top-30 before:left-0 before:border-t-15 before:border-t-divider-1 before:border-l-15 before:border-l-transparent",style:p({backgroundColor:e.color})},f(e.ym),5),c("div",y,[(o(!0),r(u,null,v(e.data,(e=>(o(),b(t,{key:e.id,article:e},null,8,["article"])))),128))])])))),128)):h("v-if",!0)])),_:1},8,["loading","error","finished","finished-text"])],544)}}},[["__scopeId","data-v-6783f064"]]);export{_ as default};
