import{u as N,a as q,r as a,i as h,o as y,c as C,b as x,g as $,t as S,e as _,j as b,k as D,y as T,q as V}from"./vendor.0f7bf07e.js";import{_ as A,u as B}from"./index.f8926bac.js";const O={class:"content"},j={class:"content-title"},E={key:0,class:"list-box","data-aos":"fade-up"},J={name:"ListDetail"},M=Object.assign(J,{setup(R){let{proxy:r}=V(),m=B(),n=N(),p=q(),u=a({page:1,per_page:12}),l=a(),c=a(),g=a([]),o=a(!1),v=a(!1),i=a(!1);n.query.name?(c.value="Tag",l.value=n.query.name,u.value.labels=n.query.name):(c.value="Category",u.value.milestone=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).number:"",l.value=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).title:""),document.title=l.value,localStorage.setItem("docTitle",l.value);async function k(){r.$blogApi.resolve("getArticle",u.value).then(e=>{console.log("\u5206\u7C7B\u8BE6\u60C5\u5217\u8868",e),o.value=!1,e!=null&&e.length?(e.length<12?v.value=!0:u.value.page++,e.forEach(t=>{t.created_at=r.$format(t.created_at,"zh_CN").replace(/\s/,"");const d=Math.floor(Math.random()*m.themeColors.length);t.color=m.themeColors[d]}),g.value.push(...e)):e!=null&&e.length?(i.value=!0,o.value=!1):(v.value=!0,n.query.name&&(r.$toast("\u5F53\u524D\u76EE\u5F55\u4E0B\u6CA1\u6709\u6587\u7AE0"),setTimeout(()=>{p.back()},1e3)))}).catch(e=>{console.log("======\u8BF7\u6C42\u5931\u8D25======",e),r.$toast(`\u8BF7\u6C42\u5931\u8D25${e}`),i.value=!0,o.value=!1})}let I=()=>k(),f=()=>{localStorage.removeItem("categories"),p.back()};return(e,t)=>{const d=h("CompList"),L=h("van-list");return y(),C("div",O,[x("div",j,[$(S(c.value)+"\uFF1A ",1),x("span",{class:"cursor",onClick:t[0]||(t[0]=(...s)=>_(f)&&_(f)(...s))},S(l.value),1)]),b(L,{loading:o.value,"onUpdate:loading":t[1]||(t[1]=s=>o.value=s),finished:v.value,"finished-text":"\u6CA1\u6709\u4E86\u54E6 \u0E05 \u0333\u0352\u2022\u02D1\u032B\u2022 \u0333\u0352\u0E05",error:i.value,"onUpdate:error":t[2]||(t[2]=s=>i.value=s),"error-text":"\u8BF7\u6C42\u5931\u8D25\uFF0C\u70B9\u51FB\u91CD\u65B0\u52A0\u8F7D",onLoad:_(I)},{default:D(()=>[g.value.length?(y(),C("div",E,[b(d,{list:g.value},null,8,["list"])])):T("",!0)]),_:1},8,["loading","finished","error","onLoad"])])}}});var z=A(M,[["__scopeId","data-v-2a68eb22"]]);export{z as default};
