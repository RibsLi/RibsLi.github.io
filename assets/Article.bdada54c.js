import{a as q,r as k,h as y,X as I,o as l,c as r,b as s,F as S,f as V,z as L,p as A,e as i,t as d,i as g,g as C,y as $,k as z,j as x,m as W}from"./vendor.87e019c6.js";import{_ as E,u as F}from"./index.e1d8e0dc.js";import{q as J}from"./query.dc675240.js";const O={key:0,class:"content-box"},P={class:"content"},R=["onClick"],T={class:"title"},X=["onClick"],G={class:"info txt-ell-one"},H=["onClick"],K={key:0,class:"label-list"},Q=["onClick"],Y={class:"description txt-ell-one"},Z={setup(ee){let{proxy:b}=W(),c=F(),u=q(),_=k({state:"open",page:1,per_page:12}),v=k(),f=k();D();async function D(){b.$blogApi.resolve("getArticle",_.value).then(e=>{console.log("\u6587\u7AE0\u5217\u8868",e),e!=null&&e.length&&(e.forEach(o=>{o.created_at=b.$format(o.created_at,"zh_CN").replace(/\s/,"");const n=/^(.+)?\r\n\s*(.+)?\r\n/,m=/^\[(.+)\].*(http.*(?:jpg|jpeg|png|gif))/,p=n.exec(o.body),h=Math.floor(Math.random()*c.byWlop.length),t=Math.floor(Math.random()*c.defaultDes.length);if(p&&p.length>=2){const a=m.exec(p[1]);a&&a.length===3?(o.description=a[1],o.imgUrl=a[2]):(o.description=c.defaultDes[t],o.imgUrl=c.byWlop[h])}else o.description=c.defaultDes[t],o.imgUrl=c.byWlop[h]}),v.value=e)})}J().then(e=>{console.log("\u6587\u7AE0\u603B\u6570",e),f.value=e==null?void 0:e.repository.issues.totalCount});let w=e=>{localStorage.setItem("content",JSON.stringify(e)),u.push("/articleDetail")},M=()=>{console.log("-",_.value.page),v.value=null,D()},N=()=>u.push("/archives"),U=e=>{console.log(e),localStorage.setItem("categories",JSON.stringify(e)),u.push("/listDetail")},B=e=>{console.log(e),localStorage.removeItem("categories"),u.push({path:"/listDetail",query:{name:e.name}})};return(e,o)=>{const n=y("van-icon"),m=y("van-pagination"),p=y("Loading"),h=I("lazy");return v.value?(l(),r("div",O,[s("div",P,[(l(!0),r(S,null,V(v.value,t=>(l(),r("div",{class:"list","data-aos":"fade-up",key:t.id},[L(s("img",{class:"bg-img cursor hvr-wobble-vertical",onClick:A(a=>i(w)(t),["self"])},null,8,R),[[h,t.imgUrl]]),s("div",T,[s("div",{class:"name cursor txt-ell-one",onClick:A(a=>i(w)(t),["self"])},d(t.title),9,X),s("div",G,[s("div",{class:"info-item cursor",onClick:o[0]||(o[0]=(...a)=>i(N)&&i(N)(...a))},[g(n,{name:"notes-o"}),C(" "+d(t.created_at),1)]),s("div",{class:"info-item cursor",onClick:a=>i(U)(t.milestone)},[g(n,{name:"apps-o"}),C(" "+d(t.milestone.title?t.milestone.title:"\u6682\u65E0\u5206\u7C7B"),1)],8,H),t.labels?(l(),r("div",K,[g(n,{name:"label-o"}),(l(!0),r(S,null,V(t.labels,(a,j)=>(l(),r("div",{class:"label-item cursor",key:j,onClick:te=>i(B)(a)},d(a.name),9,Q))),128))])):$("",!0)]),s("div",Y,d(t.description),1)])]))),128))]),f.value>12?(l(),z(m,{key:0,class:"pagination",modelValue:_.value.page,"onUpdate:modelValue":o[1]||(o[1]=t=>_.value.page=t),"total-items":f.value,"show-page-size":5,"items-per-page":"12",onChange:i(M)},{"prev-text":x(()=>[g(n,{name:"arrow-left"})]),"next-text":x(()=>[g(n,{name:"arrow"})]),page:x(({text:t})=>[C(d(t),1)]),_:1},8,["modelValue","total-items","onChange"])):$("",!0)])):(l(),z(p,{key:1}))}}};var se=E(Z,[["__scopeId","data-v-0dcea03c"]]);export{se as default};
