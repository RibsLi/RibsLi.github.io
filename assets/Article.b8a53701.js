import{a as W,r as k,j as C,U as j,o as a,c as r,b as s,F as N,f as S,m as I,V as A,e as i,t as d,k as p,g as y,C as U,q as $,l as x,W as L}from"./vendor.895be795.js";import{_ as E,u as F}from"./index.bfe12c2b.js";import{q as J}from"./query.1d09213f.js";const O={key:0,class:"content-box"},P={class:"content"},R=["onClick"],T={class:"title"},G=["onClick"],H={class:"info txt-ell-one"},K=["onClick"],Q={key:0,class:"label-list"},X=["onClick"],Y={class:"description txt-ell-one"},Z={setup(ee){let{proxy:b}=L(),c=F(),u=W(),_=k({state:"open",page:1,per_page:12}),v=k(),f=k();D();async function D(){b.$blogApi.resolve("getArticle",_.value).then(e=>{console.log("\u6587\u7AE0\u5217\u8868",e),e!=null&&e.length&&(e.forEach(o=>{o.created_at=b.$format(o.created_at,"zh_CN").replace(/\s/,"");const n=/^(.+)?\r\n\s*(.+)?\r\n/,m=/^\[(.+)\].*(http.*(?:jpg|jpeg|png|gif))/,g=n.exec(o.body),h=Math.floor(Math.random()*c.byWlop.length),t=Math.floor(Math.random()*c.defaultDes.length);if(g&&g.length>=2){const l=m.exec(g[1]);l&&l.length===3?(o.description=l[1],o.imgUrl=l[2]):(o.description=c.defaultDes[t],o.imgUrl=c.byWlop[h])}else o.description=c.defaultDes[t],o.imgUrl=c.byWlop[h]}),v.value=e)})}J().then(e=>{console.log("\u6587\u7AE0\u603B\u6570",e),f.value=e==null?void 0:e.repository.issues.totalCount});let V=e=>{localStorage.setItem("content",JSON.stringify(e)),u.push("/articleDetail")},M=()=>{console.log("-",_.value.page),v.value=null,D()},w=()=>u.push("/archives"),q=e=>{console.log(e),localStorage.setItem("categories",JSON.stringify(e)),u.push("/listDetail")},z=e=>{console.log(e),localStorage.removeItem("categories"),u.push({path:"/listDetail",query:{name:e.name}})};return(e,o)=>{const n=C("van-icon"),m=C("van-pagination"),g=C("Loading"),h=j("lazy");return v.value?(a(),r("div",O,[s("div",P,[(a(!0),r(N,null,S(v.value,t=>(a(),r("div",{class:"list","data-aos":"fade-up",key:t.id},[I(s("img",{class:"bg-img cursor hvr-wobble-vertical",onClick:A(l=>i(V)(t),["self"])},null,8,R),[[h,t.imgUrl]]),s("div",T,[s("div",{class:"name cursor txt-ell-one",onClick:A(l=>i(V)(t),["self"])},d(t.title),9,G),s("div",H,[s("div",{class:"info-item cursor",onClick:o[0]||(o[0]=(...l)=>i(w)&&i(w)(...l))},[p(n,{name:"notes-o"}),y(" "+d(t.created_at),1)]),s("div",{class:"info-item cursor",onClick:l=>i(q)(t.milestone)},[p(n,{name:"apps-o"}),y(" "+d(t.milestone.title?t.milestone.title:"\u6682\u65E0\u5206\u7C7B"),1)],8,K),t.labels?(a(),r("div",Q,[p(n,{name:"label-o"}),(a(!0),r(N,null,S(t.labels,(l,B)=>(a(),r("div",{class:"label-item cursor",key:B,onClick:te=>i(z)(l)},d(l.name),9,X))),128))])):U("",!0)]),s("div",Y,d(t.description),1)])]))),128))]),f.value>12?(a(),$(m,{key:0,class:"pagination",modelValue:_.value.page,"onUpdate:modelValue":o[1]||(o[1]=t=>_.value.page=t),"total-items":f.value,"show-page-size":5,"items-per-page":"12",onChange:i(M)},{"prev-text":x(()=>[p(n,{name:"arrow-left"})]),"next-text":x(()=>[p(n,{name:"arrow"})]),page:x(({text:t})=>[y(d(t),1)]),_:1},8,["modelValue","total-items","onChange"])):U("",!0)])):(a(),$(g,{key:1}))}}};var se=E(Z,[["__scopeId","data-v-0dcea03c"]]);export{se as default};
