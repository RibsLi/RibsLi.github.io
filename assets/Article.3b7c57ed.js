import{a as B,r as k,h as C,a0 as j,o as l,c as g,b as s,F as w,f as A,A as q,p as V,e as i,t as u,i as p,g as x,y as I,k as $,j as y,m as L}from"./vendor.6812e6c6.js";import{_ as E,u as F}from"./index.06be2f1d.js";import{q as J}from"./query.9d2fb218.js";const O={key:0,class:"content-box"},R={class:"content"},T=["onClick"],G={class:"title"},H=["onClick"],K={class:"info txt-ell-one"},Q=["onClick"],W={key:0,class:"label-list"},X=["onClick"],Y={class:"description txt-ell-one"},Z={setup(ee){let{proxy:b}=L(),c=F(),_=B(),r=k({state:"open",page:1,per_page:12}),v=k(),h=k();localStorage.getItem("currentPage")&&(r.value.page=Number(localStorage.getItem("currentPage"))),S();async function S(){b.$blogApi.resolve("getArticle",r.value).then(e=>{console.log("\u6587\u7AE0\u5217\u8868",e),e!=null&&e.length&&(e.forEach(o=>{o.created_at=b.$format(o.created_at,"zh_CN").replace(/\s/,"");const n=/^(.+)?\r\n\s*(.+)?\r\n/,f=/^\[(.+)\].*(http.*(?:jpg|jpeg|png|gif))/,d=n.exec(o.body),m=Math.floor(Math.random()*c.images.length),t=Math.floor(Math.random()*c.defaultDes.length);if(d&&d.length>=2){const a=f.exec(d[1]);a&&a.length===3?(o.description=a[1],o.imgUrl=a[2]):(o.description=c.defaultDes[t],o.imgUrl=c.images[m])}else o.description=c.defaultDes[t],o.imgUrl=c.images[m]}),v.value=e)})}J().then(e=>{console.log("\u6587\u7AE0\u603B\u6570",e),h.value=e==null?void 0:e.repository.issues.totalCount});let D=e=>{localStorage.setItem("content",JSON.stringify(e)),_.push("/articleDetail")},M=()=>{console.log("-",r.value.page),localStorage.setItem("currentPage",r.value.page),v.value=null,S()},N=()=>_.push("/archives"),P=e=>{console.log(e),localStorage.setItem("categories",JSON.stringify(e)),_.push("/listDetail")},U=e=>{console.log(e),localStorage.removeItem("categories"),_.push({path:"/listDetail",query:{name:e.name}})};return(e,o)=>{const n=C("van-icon"),f=C("van-pagination"),d=C("Loading"),m=j("lazy");return v.value?(l(),g("div",O,[s("div",R,[(l(!0),g(w,null,A(v.value,t=>(l(),g("div",{class:"list","data-aos":"fade-up",key:t.id},[q(s("img",{class:"bg-img cursor hvr-wobble-vertical",onClick:V(a=>i(D)(t),["self"])},null,8,T),[[m,t.imgUrl]]),s("div",G,[s("div",{class:"name cursor txt-ell-one",onClick:V(a=>i(D)(t),["self"])},u(t.title),9,H),s("div",K,[s("div",{class:"info-item cursor",onClick:o[0]||(o[0]=(...a)=>i(N)&&i(N)(...a))},[p(n,{name:"notes-o"}),x(" "+u(t.created_at),1)]),s("div",{class:"info-item cursor",onClick:a=>i(P)(t.milestone)},[p(n,{name:"apps-o"}),x(" "+u(t.milestone.title?t.milestone.title:"\u6682\u65E0\u5206\u7C7B"),1)],8,Q),t.labels?(l(),g("div",W,[p(n,{name:"label-o"}),(l(!0),g(w,null,A(t.labels,(a,z)=>(l(),g("div",{class:"label-item cursor",key:z,onClick:te=>i(U)(a)},u(a.name),9,X))),128))])):I("",!0)]),s("div",Y,u(t.description),1)])]))),128))]),h.value>12?(l(),$(f,{key:0,class:"pagination",modelValue:r.value.page,"onUpdate:modelValue":o[1]||(o[1]=t=>r.value.page=t),"total-items":h.value,"show-page-size":5,"items-per-page":"12",onChange:i(M)},{"prev-text":y(()=>[p(n,{name:"arrow-left"})]),"next-text":y(()=>[p(n,{name:"arrow"})]),page:y(({text:t})=>[x(u(t),1)]),_:1},8,["modelValue","total-items","onChange"])):I("",!0)])):(l(),$(d,{key:1}))}}};var se=E(Z,[["__scopeId","data-v-7a6015aa"]]);export{se as default};
