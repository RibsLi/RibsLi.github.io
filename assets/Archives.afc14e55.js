import{_ as e,u as a}from"./index.7b0a0220.js";import{q as l}from"./query.6f2f4b62.js";import{r as t,a3 as o,a4 as s,i as r,o as u,c as n,j as v,k as i,F as c,f as d,b as p,t as h,m as f,y as g,e as m,q as y}from"./vendor.43b10751.js";const _={key:0,class:"content"};var b=e({setup(e){let{proxy:b}=y(),x=a(),C=t({state:"open",page:1,per_page:12}),k=t([]),$=t(),j=t(!1),q=t(!1),L=t(!1),T=t(),A=t();o((()=>T.value.scrollTop=A.value)),s((()=>A.value=T.value.scrollTop));let B=()=>async function(){b.$blogApi.resolve("getArticle",C.value).then((e=>{j.value=!1,(null==e?void 0:e.length)?(e.length<12?q.value=!0:C.value.page++,e.forEach((e=>{const a=e.created_at.split("-"),l=a[0]+"年"+a[1]+"月";let t=!1;e.created_at=b.$format(e.created_at,"zh_CN").replace(/\s/,"");const o=Math.floor(Math.random()*x.themeColors.length);if(e.color=x.themeColors[o],k.value){for(let a=0;a<k.value.length;a++)if(l===k.value[a].ym){t=!0,k.value[a].data.push(e),k.value[a].color=x.themeColors[o];break}t||k.value.push({ym:l,data:[e]})}else k.value=[{ym:l,data:[e]}]}))):(null==e?void 0:e.length)?(L.value=!0,j.value=!1):q.value=!0})).catch((e=>{b.$toast(`请求失败${e}`),L.value=!0,j.value=!1}))}();l().then((e=>{$.value=null==e?void 0:e.repository.issues.totalCount}));let H=()=>{x.scrollBox=T.value;const e=T.value.scrollHeight-T.value.offsetHeight,a=T.value.scrollTop;x.percentage=parseInt(a/e*100)};return(e,a)=>{const l=r("CompList"),t=r("van-list");return u(),n("div",{class:"content-box",ref_key:"scrollBox",ref:T,onScroll:a[2]||(a[2]=(...e)=>m(H)&&m(H)(...e))},[v(t,{loading:j.value,"onUpdate:loading":a[0]||(a[0]=e=>j.value=e),error:L.value,"onUpdate:error":a[1]||(a[1]=e=>L.value=e),finished:q.value,"finished-text":`总共 ${$.value} 条，没有了哦 ฅ ̳͒•ˑ̫• ̳͒ฅ`,"error-text":"请求失败，点击重新加载",onLoad:m(B)},{default:i((()=>[k.value.length?(u(),n("div",_,[(u(!0),n(c,null,d(k.value,((e,a)=>(u(),n("div",{class:"list",key:a},[p("div",{class:"timeline",style:f({backgroundColor:e.color})},h(e.ym),5),v(l,{list:e.data},null,8,["list"])])))),128))])):g("",!0)])),_:1},8,["loading","error","finished","finished-text","onLoad"])],544)}}},[["__scopeId","data-v-2ebd323c"]]);export{b as default};
