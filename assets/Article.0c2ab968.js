import{a as A,r as c,W as H,h,X as L,o as n,c as i,b as r,F as V,f as z,k as N,j as x,y as I,e as f,m as W,n as $,z as j,p as M,t as d,i as v,g as y}from"./vendor.dff8f2dd.js";import{_ as O,u as R}from"./index.c683a359.js";const E={class:"content"},F=["onClick"],P={class:"title"},J=["onClick"],X={class:"info txt-ell-one"},q={class:"info-item cursor"},G={class:"info-item cursor"},K={key:0,class:"label-list"},Q={class:"description txt-ell-two"},Y={setup(Z){let{proxy:k}=W(),a=R(),S=A(),T=c({state:"open",page:1,per_page:12}),b=c(!0),m=c(),_=c(),w=c(1),C=c(50);k.$blogApi.resolve("getArticle",T.value).then(o=>{console.log("\u6587\u7AE0\u5217\u8868",o),o!=null&&o.length&&(o.forEach(t=>{t.created_at=k.$format(t.created_at,"zh_CN").replace(/\s/,"");const l=/^(.+)?\r\n\s*(.+)?\r\n/,u=/^\[(.+)\].*(http.*(?:jpg|jpeg|png|gif))/,p=l.exec(t.body),g=Math.floor(Math.random()*a.byWlop.length),e=Math.floor(Math.random()*a.defaultDes.length);if(p&&p.length>=2){const s=u.exec(p[1]);s&&s.length===3?(t.description=s[1],t.imgUrl=s[2]):(t.description=a.defaultDes[e],t.imgUrl=a.byWlop[g])}else t.description=a.defaultDes[e],t.imgUrl=a.byWlop[g]}),m.value=o)}),H((o,t,l)=>{b.value=!1,a.percentage=null,setTimeout(()=>{l()},500)});let D=()=>{a.scrollBox=_.value;const o=_.value.scrollHeight,t=_.value.offsetHeight,l=o-t,u=_.value.scrollTop;a.percentage=parseInt(u/l*100)},B=o=>{localStorage.setItem("content",JSON.stringify(o)),S.push("/articleDetail")};return(o,t)=>{const l=h("van-icon"),u=h("van-pagination"),p=h("Loading"),g=L("lazy");return m.value?(n(),i("div",{key:0,class:"content-box",ref_key:"scrollBox",ref:_,onScroll:t[1]||(t[1]=(...e)=>f(D)&&f(D)(...e))},[r("div",E,[(n(!0),i(V,null,z(m.value,e=>(n(),i("div",{class:$(["list animate__animated",b.value?"animate__fadeInDown":"animate__fadeOutDown"]),key:e.id},[j(r("img",{class:"bg-img cursor hvr-wobble-vertical",onClick:M(s=>f(B)(e),["self"])},null,8,F),[[g,e.imgUrl]]),r("div",P,[r("div",{class:"name cursor txt-ell-one",onClick:M(s=>f(B)(e),["self"])},d(e.title),9,J),r("div",X,[r("div",q,[v(l,{name:"notes-o"}),y(" "+d(e.created_at),1)]),r("div",G,[v(l,{name:"apps-o"}),y(" "+d(e.milestone.title?e.milestone.title:"\u6682\u65E0\u5206\u7C7B"),1)]),e.labels?(n(),i("div",K,[v(l,{name:"label-o"}),(n(!0),i(V,null,z(e.labels,(s,U)=>(n(),i("div",{class:"label-item cursor",key:U},d(s.name),1))),128))])):I("",!0)]),r("div",Q,d(e.description),1)])],2))),128))]),C.value>12?(n(),N(u,{key:0,class:"pagination",modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=e=>w.value=e),"total-items":C.value,"show-page-size":5,"items-per-page":"12"},{"prev-text":x(()=>[v(l,{name:"arrow-left"})]),"next-text":x(()=>[v(l,{name:"arrow"})]),page:x(({text:e})=>[y(d(e),1)]),_:1},8,["modelValue","total-items"])):I("",!0)],544)):(n(),N(p,{key:1}))}}};var oe=O(Y,[["__scopeId","data-v-0f620d3c"]]);export{oe as default};
