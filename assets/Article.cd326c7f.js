import{a as q,r as k,h as C,_ as I,o as l,c as r,b as s,F as N,f as S,A as L,p as V,e as i,t as g,i as u,g as x,y as $,k as M,j as y,m as E}from"./vendor.62775ade.js";import{_ as F,u as J}from"./index.3faca7fb.js";import{q as O}from"./query.b11e263f.js";const P={key:0,class:"content-box"},R={class:"content"},T=["onClick"],G={class:"title"},H=["onClick"],K={class:"info txt-ell-one"},Q=["onClick"],W={key:0,class:"label-list"},X=["onClick"],Y={class:"description txt-ell-one"},Z={setup(ee){let{proxy:b}=E(),c=J(),p=q(),_=k({state:"open",page:1,per_page:12}),v=k(),m=k();D();async function D(){b.$blogApi.resolve("getArticle",_.value).then(e=>{console.log("\u6587\u7AE0\u5217\u8868",e),e!=null&&e.length&&(e.forEach(o=>{o.created_at=b.$format(o.created_at,"zh_CN").replace(/\s/,"");const n=/^(.+)?\r\n\s*(.+)?\r\n/,f=/^\[(.+)\].*(http.*(?:jpg|jpeg|png|gif))/,d=n.exec(o.body),h=Math.floor(Math.random()*c.images.length),t=Math.floor(Math.random()*c.defaultDes.length);if(d&&d.length>=2){const a=f.exec(d[1]);a&&a.length===3?(o.description=a[1],o.imgUrl=a[2]):(o.description=c.defaultDes[t],o.imgUrl=c.images[h])}else o.description=c.defaultDes[t],o.imgUrl=c.images[h]}),v.value=e)})}O().then(e=>{console.log("\u6587\u7AE0\u603B\u6570",e),m.value=e==null?void 0:e.repository.issues.totalCount});let w=e=>{localStorage.setItem("content",JSON.stringify(e)),p.push("/articleDetail")},U=()=>{console.log("-",_.value.page),v.value=null,D()},A=()=>p.push("/archives"),z=e=>{console.log(e),localStorage.setItem("categories",JSON.stringify(e)),p.push("/listDetail")},B=e=>{console.log(e),localStorage.removeItem("categories"),p.push({path:"/listDetail",query:{name:e.name}})};return(e,o)=>{const n=C("van-icon"),f=C("van-pagination"),d=C("Loading"),h=I("lazy");return v.value?(l(),r("div",P,[s("div",R,[(l(!0),r(N,null,S(v.value,t=>(l(),r("div",{class:"list","data-aos":"fade-up",key:t.id},[L(s("img",{class:"bg-img cursor hvr-wobble-vertical",onClick:V(a=>i(w)(t),["self"])},null,8,T),[[h,t.imgUrl]]),s("div",G,[s("div",{class:"name cursor txt-ell-one",onClick:V(a=>i(w)(t),["self"])},g(t.title),9,H),s("div",K,[s("div",{class:"info-item cursor",onClick:o[0]||(o[0]=(...a)=>i(A)&&i(A)(...a))},[u(n,{name:"notes-o"}),x(" "+g(t.created_at),1)]),s("div",{class:"info-item cursor",onClick:a=>i(z)(t.milestone)},[u(n,{name:"apps-o"}),x(" "+g(t.milestone.title?t.milestone.title:"\u6682\u65E0\u5206\u7C7B"),1)],8,Q),t.labels?(l(),r("div",W,[u(n,{name:"label-o"}),(l(!0),r(N,null,S(t.labels,(a,j)=>(l(),r("div",{class:"label-item cursor",key:j,onClick:te=>i(B)(a)},g(a.name),9,X))),128))])):$("",!0)]),s("div",Y,g(t.description),1)])]))),128))]),m.value>12?(l(),M(f,{key:0,class:"pagination",modelValue:_.value.page,"onUpdate:modelValue":o[1]||(o[1]=t=>_.value.page=t),"total-items":m.value,"show-page-size":5,"items-per-page":"12",onChange:i(U)},{"prev-text":y(()=>[u(n,{name:"arrow-left"})]),"next-text":y(()=>[u(n,{name:"arrow"})]),page:y(({text:t})=>[x(g(t),1)]),_:1},8,["modelValue","total-items","onChange"])):$("",!0)])):(l(),M(d,{key:1}))}}};var se=F(Z,[["__scopeId","data-v-035f93ca"]]);export{se as default};
