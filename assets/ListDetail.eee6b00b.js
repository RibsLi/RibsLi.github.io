import{u as e,a,r as t,i as l,o,c as s,b as r,g as u,t as n,e as i,j as c,k as v,y as g,q as d}from"./vendor.43b10751.js";import{_ as m,u as p}from"./index.7b0a0220.js";const h={class:"content"},f={class:"content-title"},b={key:0,class:"list-box","data-aos":"fade-up"},y={name:"ListDetail"};var S=m(Object.assign(y,{setup(m){let{proxy:y}=d(),S=p(),_=e(),I=a(),x=t({page:1,per_page:12}),C=t(),k=t(),q=t([]),$=t(!1),j=t(!1),L=t(!1);_.query.name?(k.value="Tag",C.value=_.query.name,x.value.labels=_.query.name):(k.value="Category",x.value.milestone=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).number:"",C.value=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).title:""),document.title=C.value,localStorage.setItem("docTitle",C.value);let N=()=>async function(){y.$blogApi.resolve("getArticle",x.value).then((e=>{$.value=!1,(null==e?void 0:e.length)?(e.length<12?j.value=!0:x.value.page++,e.forEach((e=>{e.created_at=y.$format(e.created_at,"zh_CN").replace(/\s/,"");const a=Math.floor(Math.random()*S.themeColors.length);e.color=S.themeColors[a]})),q.value.push(...e)):(null==e?void 0:e.length)?(L.value=!0,$.value=!1):(j.value=!0,_.query.name&&(y.$toast("当前目录下没有文章"),setTimeout((()=>{I.back()}),1e3)))})).catch((e=>{y.$toast(`请求失败${e}`),L.value=!0,$.value=!1}))}(),O=()=>{localStorage.removeItem("categories"),I.back()};return(e,a)=>{const t=l("CompList"),d=l("van-list");return o(),s("div",h,[r("div",f,[u(n(k.value)+"： ",1),r("span",{class:"cursor",onClick:a[0]||(a[0]=(...e)=>i(O)&&i(O)(...e))},n(C.value),1)]),c(d,{loading:$.value,"onUpdate:loading":a[1]||(a[1]=e=>$.value=e),error:L.value,"onUpdate:error":a[2]||(a[2]=e=>L.value=e),finished:j.value,"finished-text":"没有了哦 ฅ ̳͒•ˑ̫• ̳͒ฅ","error-text":"请求失败，点击重新加载",onLoad:i(N)},{default:v((()=>[q.value.length?(o(),s("div",b,[c(t,{list:q.value},null,8,["list"])])):g("",!0)])),_:1},8,["loading","error","finished","onLoad"])])}}}),[["__scopeId","data-v-b73f4aa6"]]);export{S as default};
