import{_ as b,u as T}from"./index.f8926bac.js";import{q as $}from"./query.80de4030.js";import{r as a,a3 as H,a4 as N,i as k,o as p,c as f,j as A,k as S,F as q,f as V,b as z,t as D,m as E,y as F,e as h,q as M}from"./vendor.0f7bf07e.js";const U={key:0,class:"content"},j={setup(w){let{proxy:g}=M(),u=T(),m=a({state:"open",page:1,per_page:12}),o=a([]),y=a(),i=a(!1),_=a(!1),v=a(!1),s=a(),x=a();H(()=>s.value.scrollTop=x.value),N(()=>x.value=s.value.scrollTop);async function B(){g.$blogApi.resolve("getArticle",m.value).then(e=>{console.log("\u5F52\u6863\u5217\u8868",e),i.value=!1,e!=null&&e.length?(e.length<12?_.value=!0:m.value.page++,e.forEach(l=>{const r=l.created_at.split("-"),n=r[0]+"\u5E74"+r[1]+"\u6708";let t=!1;l.created_at=g.$format(l.created_at,"zh_CN").replace(/\s/,"");const d=Math.floor(Math.random()*u.themeColors.length);if(l.color=u.themeColors[d],!o.value)o.value=[{ym:n,data:[l]}];else{for(let c=0;c<o.value.length;c++)if(n===o.value[c].ym){t=!0,o.value[c].data.push(l),o.value[c].color=u.themeColors[d];break}t||o.value.push({ym:n,data:[l]})}console.log(o.value)})):e!=null&&e.length?(v.value=!0,i.value=!1):_.value=!0}).catch(e=>{console.log("======\u8BF7\u6C42\u5931\u8D25======",e),g.$toast(`\u8BF7\u6C42\u5931\u8D25${e}`),v.value=!0,i.value=!1})}let L=()=>B();$().then(e=>{console.log("\u6587\u7AE0\u603B\u6570",e),y.value=e==null?void 0:e.repository.issues.totalCount});let C=()=>{console.log("=="),u.scrollBox=s.value;const e=s.value.scrollHeight,l=s.value.offsetHeight,r=e-l,n=s.value.scrollTop;u.percentage=parseInt(n/r*100)};return(e,l)=>{const r=k("CompList"),n=k("van-list");return p(),f("div",{class:"content-box",ref_key:"scrollBox",ref:s,onScroll:l[2]||(l[2]=(...t)=>h(C)&&h(C)(...t))},[A(n,{loading:i.value,"onUpdate:loading":l[0]||(l[0]=t=>i.value=t),finished:_.value,"finished-text":`\u603B\u5171 ${y.value} \u6761\uFF0C\u6CA1\u6709\u4E86\u54E6 \u0E05 \u0333\u0352\u2022\u02D1\u032B\u2022 \u0333\u0352\u0E05`,error:v.value,"onUpdate:error":l[1]||(l[1]=t=>v.value=t),"error-text":"\u8BF7\u6C42\u5931\u8D25\uFF0C\u70B9\u51FB\u91CD\u65B0\u52A0\u8F7D",onLoad:h(L)},{default:S(()=>[o.value.length?(p(),f("div",U,[(p(!0),f(q,null,V(o.value,(t,d)=>(p(),f("div",{class:"list",key:d},[z("div",{class:"timeline",style:E({backgroundColor:t.color})},D(t.ym),5),A(r,{list:t.data},null,8,["list"])]))),128))])):F("",!0)]),_:1},8,["loading","finished","finished-text","error","onLoad"])],544)}}};var G=b(j,[["__scopeId","data-v-347964ae"]]);export{G as default};
