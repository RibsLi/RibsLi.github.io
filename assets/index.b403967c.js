import{r as e,m as a,q as t,e as l,o as s,c as o,s as r,i as n,F as u,f as c,x as i,j as d,y as p}from"./vendor.61ae407d.js";import{_ as v,u as g}from"./index.7779eb0a.js";import{p as m}from"./index.76ecdbef.js";const h={key:0,class:"pt-5"},f={key:0,class:"bg-white/50 p-15 grid gap-15 grid-cols-3 box mt-10"};var x=v({setup(v){const{proxy:x}=p(),y=g(),_=e({state:"open",page:1,per_page:100});let b=e(),j=e([]);const k=e();let $=e();a((()=>k.value),(e=>{e&&(clearTimeout($.value),$.value=setTimeout((()=>C()),500))}));const w=()=>{x.$blogApi.resolve("giteeIssues",_.value).then((e=>{(null==e?void 0:e.length)&&(e.length>=_.value.per_page&&(_.value.page++,w()),e.forEach((e=>{e.created_at=x.$format(e.created_at,"zh_CN").replace(/\s/,"");const a=Math.floor(Math.random()*y.palette.length);e.color=y.palette[a]})),b.value=e)}))};w();const C=()=>k.value?(e=>{j.value=[];const a=`(.*?)${[...e].join("(.*?)")}(.*?)`,t=RegExp(a,"i");j.value=b.value.filter((a=>a.title.includes(e)||t.test(a.title)||t.test(m(a.title,{toneType:"none"})))),!j.value.length&&x.$toast("没有搜索到相关内容")})(k.value):x.$toast("请输入搜索内容");return(e,a)=>{const p=t("van-search"),v=t("ArticleCard"),g=t("Loading");return l(b)?(s(),o("div",h,[r(p,{class:"mx-auto max-w-800",modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value=e),placeholder:"请输入搜索内容",shape:"round",background:"rgba(255, 255, 255, 0)","clear-trigger":"always",onSearch:C,onClear:a[1]||(a[1]=e=>n(j)?j.value=[]:j=[])},null,8,["modelValue"]),l(j).length?(s(),o("div",f,[(s(!0),o(u,null,c(l(j),(e=>(s(),i(v,{key:e.id,article:e},null,8,["article"])))),128))])):d("v-if",!0)])):(s(),i(g,{key:1}))}}},[["__scopeId","data-v-a0fd5576"]]);export{x as default};
