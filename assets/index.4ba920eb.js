import{_ as e,a,A as t,u as l,h as s,k as o,o as r,c as n,b as i,B as u,t as d,d as c,l as v,m as g,n as p,F as h,p as m,q as b,g as f}from"./index.3e609359.js";const y={class:"select-none vanlist"},_={class:"bg-white/80 z-1 lh-60 pl-15 bg-primary mt-15"},x={class:"text-#b854d4 font-bold px-20 py-8 bg-white rounded-5"},q={class:"grid gap-15 grid-cols-3 box p-15"};var C=e(Object.assign({name:"ArticleCategory"},{setup(e){const{proxy:C}=f(),$=a(),k=t(),A=l();let I=s({page:1,per_page:12}),w=s(),M=s(),S=s([]),T=s(!1),j=s(!1),z=s(!1);if(k.query.name)M.value="Tag",w.value=k.query.name,I.value.labels=k.query.name;else{M.value="Category";const e=localStorage.getItem("categories"),a=e?JSON.parse(e):{};I.value.milestone=a.title||"",w.value=a.title||""}document.title=w.value,localStorage.setItem("docTitle",w.value);const N=()=>{C.$blogApi.resolve("giteeIssues",I.value).then((e=>{T.value=!1,(null==e?void 0:e.length)?(e.length<12?j.value=!0:I.value.page++,e.forEach((e=>{e.created_at=C.$format(e.created_at,"zh_CN").replace(/\s/,"");const a=Math.floor(Math.random()*$.palette.length);e.color=$.palette[a]})),S.value.push(...e)):(null==e?void 0:e.length)?(z.value=!0,T.value=!1):(j.value=!0,k.query.name&&(C.$toast("当前目录下没有文章"),setTimeout((()=>A.back()),1e3)))})).catch((e=>{C.$toast(`请求失败${e}`),z.value=!0,T.value=!1}))};return(e,a)=>{const t=o("ArticleCard"),l=o("van-list");return r(),n("div",y,[i("div",_,[u(d(c(M))+"： ",1),i("span",x,d(c(w)),1)]),v(l,{loading:c(T),"onUpdate:loading":a[0]||(a[0]=e=>p(T)?T.value=e:T=e),error:c(z),"onUpdate:error":a[1]||(a[1]=e=>p(z)?z.value=e:z=e),finished:c(j),"finished-text":"没有了哦 ฅ ̳͒•ˑ̫• ̳͒ฅ","error-text":"请求失败，点击重新加载",onLoad:N},{default:g((()=>[i("div",q,[(r(!0),n(h,null,m(c(S),(e=>(r(),b(t,{key:e.id,article:e},null,8,["article"])))),128))])])),_:1},8,["loading","error","finished"])])}}}),[["__scopeId","data-v-d8d1a426"],["__file","D:/MyWork/blog-vue3/src/views/articleCategory/index.vue"]]);export{C as default};
