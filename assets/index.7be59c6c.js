import{r as e,a5 as a,a6 as l,q as t,o,c as s,s as r,v as n,e as i,i as u,b as v,F as c,f as d,x as p,y as f}from"./vendor.61ae407d.js";import{_ as g,u as h}from"./index.56641dfb.js";const x={class:"grid gap-15 grid-cols-3 box"};var _=g({setup(g){const{proxy:_}=f(),m=h(),b=e({state:"open",page:1,per_page:21});let $=e([]),y=e(!1),C=e(!1),I=e(!1),T=e(),j=e();a((()=>T.value.scrollTop=j.value)),l((()=>j.value=T.value.scrollTop));const k=()=>{_.$blogApi.resolve("giteeIssues",b.value).then((e=>{y.value=!1,(null==e?void 0:e.length)?(e.length<21?C.value=!0:b.value.page++,e.forEach((e=>{e.created_at=_.$format(e.created_at,"zh_CN").replace(/\s/,"");const a=Math.floor(Math.random()*m.palette.length);e.color=m.palette[a]})),$.value.push(...e)):(null==e?void 0:e.length)?(I.value=!0,y.value=!1):C.value=!0})).catch((e=>{_.$toast(`请求失败：${e}`),I.value=!0,y.value=!1}))},A=()=>{m.scrollBox=T.value;const e=T.value.scrollHeight-T.value.offsetHeight,a=T.value.scrollTop;m.percentage=parseInt(a/e*100)};return(e,a)=>{const l=t("ArticleCard"),f=t("van-list");return o(),s("div",{class:"select-none vanlist p-15 overflow-auto fixed top-60 left-0 right-0 bottom-0",ref_key:"scrollBox",ref:T,onScroll:A},[r(f,{loading:i(y),"onUpdate:loading":a[0]||(a[0]=e=>u(y)?y.value=e:y=e),error:i(I),"onUpdate:error":a[1]||(a[1]=e=>u(I)?I.value=e:I=e),finished:i(C),"finished-text":`总共 ${i(m).articleCount} 条，没有了哦 ฅ ̳͒•ˑ̫• ̳͒ฅ`,"error-text":"请求失败，点击重新加载",onLoad:k},{default:n((()=>[v("div",x,[(o(!0),s(c,null,d(i($),(e=>(o(),p(l,{key:e.id,article:e},null,8,["article"])))),128))])])),_:1},8,["loading","error","finished","finished-text"])],544)}}},[["__scopeId","data-v-6bda6362"]]);export{_ as default};
