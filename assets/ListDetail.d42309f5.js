import{u as e,a,r as t,i as l,o,c as s,b as r,g as n,t as c,f as i,j as u,k as g,z as v,m,s as d}from"./vendor.f01c9790.js";import{_ as p,u as h}from"./index.e2668ecf.js";const f={class:"content"},b={class:"content-title"},y={key:0,class:"list-box"},S={name:"ListDetail"};var _=p(Object.assign(S,{setup(p){const{proxy:S}=d(),_=h(),I=e(),x=a();let C=t({page:1,per_page:12}),k=t(),$=t(),j=t([]),q=t(!1),L=t(!1),N=t(!1);I.query.name?($.value="Tag",k.value=I.query.name,C.value.labels=I.query.name):($.value="Category",C.value.milestone=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).number:"",k.value=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).title:""),document.title=k.value,localStorage.setItem("docTitle",k.value);const O=()=>async function(){S.$blogApi.resolve("getArticle",C.value).then((e=>{q.value=!1,(null==e?void 0:e.length)?(e.length<12?L.value=!0:C.value.page++,e.forEach((e=>{e.created_at=S.$format(e.created_at,"zh_CN").replace(/\s/,"");const a=Math.floor(Math.random()*_.themeColors.length);e.color=_.themeColors[a]})),j.value.push(...e)):(null==e?void 0:e.length)?(N.value=!0,q.value=!1):(L.value=!0,I.query.name&&(S.$toast("当前目录下没有文章"),setTimeout((()=>{x.back()}),1e3)))})).catch((e=>{S.$toast(`请求失败${e}`),N.value=!0,q.value=!1}))}(),T=()=>{localStorage.removeItem("categories"),x.back()};return(e,a)=>{const t=l("CompList"),d=l("van-list");return o(),s("div",f,[r("div",b,[n(c(i($))+"： ",1),r("span",{class:"cursor",onClick:T},c(i(k)),1)]),u(d,{loading:i(q),"onUpdate:loading":a[0]||(a[0]=e=>m(q)?q.value=e:q=e),error:i(N),"onUpdate:error":a[1]||(a[1]=e=>m(N)?N.value=e:N=e),finished:i(L),"finished-text":"没有了哦 ฅ ̳͒•ˑ̫• ̳͒ฅ","error-text":"请求失败，点击重新加载",onLoad:O},{default:g((()=>[i(j).length?(o(),s("div",y,[u(t,{list:i(j)},null,8,["list"])])):v("",!0)])),_:1},8,["loading","error","finished"])])}}}),[["__scopeId","data-v-29fcb564"]]);export{_ as default};
