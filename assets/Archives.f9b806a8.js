import{_ as k,u as A}from"./index.30cf3beb.js";import{q as L}from"./query.8a77419a.js";import{r as o,h as m,o as d,c as v,i as y,j as b,F as $,f as N,b as B,t as S,l as V,y as q,e as z,m as E}from"./vendor.a16b03f3.js";const F={class:"content-box"},M={key:0,class:"content"},U={setup(j){let{proxy:f}=E(),p=A(),h=o({state:"open",page:1,per_page:12}),a=o([]),g=o(),n=o(!1),_=o(!1),i=o(!1);async function C(){f.$blogApi.resolve("getArticle",h.value).then(e=>{console.log("\u5F52\u6863\u5217\u8868",e),n.value=!1,e!=null&&e.length?(e.length<12?_.value=!0:h.value.page++,e.forEach(t=>{const u=t.created_at.split("-"),s=u[0]+"\u5E74"+u[1]+"\u6708";let l=!1;t.created_at=f.$format(t.created_at,"zh_CN").replace(/\s/,"");const c=Math.floor(Math.random()*p.themeColors.length);if(t.color=p.themeColors[c],!a.value)a.value=[{ym:s,data:[t]}];else{for(let r=0;r<a.value.length;r++)if(s===a.value[r].ym){l=!0,a.value[r].data.push(t),a.value[r].color=p.themeColors[c];break}l||a.value.push({ym:s,data:[t]})}console.log(a.value)})):e!=null&&e.length?(i.value=!0,n.value=!1):_.value=!0}).catch(e=>{console.log("======\u8BF7\u6C42\u5931\u8D25======",e),f.$toast(`\u8BF7\u6C42\u5931\u8D25${e}`),i.value=!0,n.value=!1})}let x=()=>C();return L().then(e=>{console.log("\u6587\u7AE0\u603B\u6570",e),g.value=e==null?void 0:e.repository.issues.totalCount}),(e,t)=>{const u=m("CompList"),s=m("van-list");return d(),v("div",F,[y(s,{loading:n.value,"onUpdate:loading":t[0]||(t[0]=l=>n.value=l),finished:_.value,"finished-text":`\u5DF2\u7ECF\u52A0\u8F7D ${g.value} \u6761\uFF0C\u6CA1\u6709\u4E86\u54E6 \u0E05 \u0333\u0352\u2022\u02D1\u032B\u2022 \u0333\u0352\u0E05`,error:i.value,"onUpdate:error":t[1]||(t[1]=l=>i.value=l),"error-text":"\u8BF7\u6C42\u5931\u8D25\uFF0C\u70B9\u51FB\u91CD\u65B0\u52A0\u8F7D",onLoad:z(x)},{default:b(()=>[a.value.length?(d(),v("div",M,[(d(!0),v($,null,N(a.value,(l,c)=>(d(),v("div",{class:"list","data-aos":"fade-up",key:c},[B("div",{class:"timeline",style:V({backgroundColor:l.color})},S(l.ym),5),y(u,{list:l.data},null,8,["list"])]))),128))])):q("",!0)]),_:1},8,["loading","finished","finished-text","error","onLoad"])])}}};var G=k(U,[["__scopeId","data-v-456ce0e5"]]);export{G as default};
