import{u as e,a,r as t,x as l,o,c as s,b as r,g as n,t as c,f as i,q as u,y as g,l as v,k as d,A as m}from"./vendor.1b44fe95.js";import{_ as p,u as h}from"./index.10593777.js";const f={class:"content"},b={class:"content-title"},y={key:0,class:"list-box"},S={name:"ListDetail"};var _=p(Object.assign(S,{setup(p){const{proxy:S}=m(),_=h(),x=e(),I=a();let C=t({page:1,per_page:12}),k=t(),q=t(),$=t([]),j=t(!1),A=t(!1),L=t(!1);x.query.name?(q.value="Tag",k.value=x.query.name,C.value.labels=x.query.name):(q.value="Category",C.value.milestone=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).number:"",k.value=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).title:""),document.title=k.value,localStorage.setItem("docTitle",k.value);const N=()=>async function(){S.$blogApi.resolve("getArticle",C.value).then((e=>{j.value=!1,(null==e?void 0:e.length)?(e.length<12?A.value=!0:C.value.page++,e.forEach((e=>{e.created_at=S.$format(e.created_at,"zh_CN").replace(/\s/,"");const a=Math.floor(Math.random()*_.themeColors.length);e.color=_.themeColors[a]})),$.value.push(...e)):(null==e?void 0:e.length)?(L.value=!0,j.value=!1):(A.value=!0,x.query.name&&(S.$toast("当前目录下没有文章"),setTimeout((()=>{I.back()}),1e3)))})).catch((e=>{S.$toast(`请求失败${e}`),L.value=!0,j.value=!1}))}(),O=()=>{localStorage.removeItem("categories"),I.back()};return(e,a)=>{const t=l("CompList"),m=l("van-list");return o(),s("div",f,[r("div",b,[n(c(i(q))+"： ",1),r("span",{class:"cursor",onClick:O},c(i(k)),1)]),u(m,{class:"vanlist",loading:i(j),"onUpdate:loading":a[0]||(a[0]=e=>d(j)?j.value=e:j=e),error:i(L),"onUpdate:error":a[1]||(a[1]=e=>d(L)?L.value=e:L=e),finished:i(A),"finished-text":"没有了哦 ฅ ̳͒•ˑ̫• ̳͒ฅ","error-text":"请求失败，点击重新加载",onLoad:N},{default:g((()=>[i($).length?(o(),s("div",y,[u(t,{list:i($)},null,8,["list"])])):v("",!0)])),_:1},8,["loading","error","finished"])])}}}),[["__scopeId","data-v-6ca4f53f"]]);export{_ as default};
