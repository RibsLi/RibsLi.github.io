import{u as e,a,r as t,q as l,o,c as r,b as s,g as n,t as i,f as u,s as c,v as g,F as d,e as v,x as p,i as m,y as h}from"./vendor.662b62b4.js";import{_ as b,u as f}from"./index.9bd40957.js";const y={class:"select-none vanlist"},x={class:"bg-white/80 z-1 lh-60 pl-15 bg-primary mt-15"},_={class:"text-#b854d4 font-bold px-20 py-8 bg-white rounded-5"},S={class:"grid gap-15 grid-cols-3 box p-15"},I={name:"ArticleCategory"};var q=b(Object.assign(I,{setup(b){const{proxy:I}=h(),q=f(),$=e(),A=a();let C=t({page:1,per_page:12}),j=t(),N=t(),O=t([]),T=t(!1),k=t(!1),w=t(!1);$.query.name?(N.value="Tag",j.value=$.query.name,C.value.labels=$.query.name):(N.value="Category",C.value.milestone=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).number:"",j.value=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).title:""),document.title=j.value,localStorage.setItem("docTitle",j.value);const z=()=>{I.$blogApi.resolve("getArticle",C.value).then((e=>{T.value=!1,(null==e?void 0:e.length)?(e.length<12?k.value=!0:C.value.page++,e.forEach((e=>{e.created_at=I.$format(e.created_at,"zh_CN").replace(/\s/,"");const a=Math.floor(Math.random()*q.palette.length);e.color=q.palette[a]})),O.value.push(...e)):(null==e?void 0:e.length)?(w.value=!0,T.value=!1):(k.value=!0,$.query.name&&(I.$toast("当前目录下没有文章"),setTimeout((()=>A.back()),1e3)))})).catch((e=>{I.$toast(`请求失败${e}`),w.value=!0,T.value=!1}))};return(e,a)=>{const t=l("ArticleCard"),h=l("van-list");return o(),r("div",y,[s("div",x,[n(i(u(N))+"： ",1),s("span",_,i(u(j)),1)]),c(h,{loading:u(T),"onUpdate:loading":a[0]||(a[0]=e=>m(T)?T.value=e:T=e),error:u(w),"onUpdate:error":a[1]||(a[1]=e=>m(w)?w.value=e:w=e),finished:u(k),"finished-text":"没有了哦 ฅ ̳͒•ˑ̫• ̳͒ฅ","error-text":"请求失败，点击重新加载",onLoad:z},{default:g((()=>[s("div",S,[(o(!0),r(d,null,v(u(O),(e=>(o(),p(t,{key:e.id,article:e},null,8,["article"])))),128))])])),_:1},8,["loading","error","finished"])])}}}),[["__scopeId","data-v-2d44ac4f"]]);export{q as default};
