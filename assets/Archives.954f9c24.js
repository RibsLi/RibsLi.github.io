import{_ as V,u as A}from"./index.06be2f1d.js";import{q as N}from"./query.9d2fb218.js";import{r as v,h as u,o as s,c as _,F as P,f as S,b,t as y,l as L,i as m,k as C,j as d,g as w,e as B,y as z,m as q}from"./vendor.6812e6c6.js";const E={key:0,class:"content"},F={setup(M){let{proxy:h}=q(),p=A(),l=v({state:"open",page:1,per_page:12}),g=v(),a=v([]);localStorage.getItem("currentPage")&&(l.value.page=Number(localStorage.getItem("currentPage"))),f();async function f(){h.$blogApi.resolve("getArticle",l.value).then(t=>{console.log("\u5F52\u6863\u5217\u8868",t),t!=null&&t.length&&t.forEach(o=>{const r=o.created_at.split("-"),n=r[0]+"\u5E74"+r[1]+"\u6708";let c=!1;o.created_at=h.$format(o.created_at,"zh_CN").replace(/\s/,"");const i=Math.floor(Math.random()*p.themeColors.length);if(o.color=p.themeColors[i],!a.value)a.value=[{ym:n,data:[o]}];else{for(let e=0;e<a.value.length;e++)if(n===a.value[e].ym){c=!0,a.value[e].data.push(o),a.value[e].color=p.themeColors[i];break}c||a.value.push({ym:n,data:[o]})}console.log(a.value)})})}N().then(t=>{console.log("\u6587\u7AE0\u603B\u6570",t),g.value=t==null?void 0:t.repository.issues.totalCount});let x=()=>{console.log("-",l.value.page),localStorage.setItem("currentPage",l.value.page),a.value=[],f()};return(t,o)=>{const r=u("List"),n=u("van-icon"),c=u("van-pagination"),i=u("Loading");return a.value?(s(),_("div",E,[(s(!0),_(P,null,S(a.value,(e,k)=>(s(),_("div",{class:"list","data-aos":"fade-up",key:k},[b("div",{class:"timeline",style:L({backgroundColor:e.color})},y(e.ym),5),m(r,{list:e.data},null,8,["list"])]))),128)),g.value>12?(s(),C(c,{key:0,class:"pagination",modelValue:l.value.page,"onUpdate:modelValue":o[0]||(o[0]=e=>l.value.page=e),"total-items":g.value,"show-page-size":5,"items-per-page":"12",onChange:B(x)},{"prev-text":d(()=>[m(n,{name:"arrow-left"})]),"next-text":d(()=>[m(n,{name:"arrow"})]),page:d(({text:e})=>[w(y(e),1)]),_:1},8,["modelValue","total-items","onChange"])):z("",!0)])):(s(),C(i,{key:1}))}}};var T=V(F,[["__scopeId","data-v-184e3858"]]);export{T as default};
