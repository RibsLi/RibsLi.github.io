import{u as N,a as $,r as a,h,o as y,c as C,b as x,g as q,t as S,e as m,i as b,j as T,y as V,m as A}from"./vendor.a16b03f3.js";import{_ as B,u as D}from"./index.a22df2f1.js";const E={class:"content"},J={class:"content-title"},M={key:0,class:"list-box","data-aos":"fade-up"},O={setup(R){let{proxy:r}=A(),p=D(),n=N(),_=$(),u=a({page:1,per_page:12}),l=a(),c=a(),v=a([]),o=a(!1),g=a(!1),i=a(!1);n.query.name?(c.value="Tag",l.value=n.query.name,u.value.labels=n.query.name):(c.value="Category",u.value.milestone=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).number:"",l.value=localStorage.getItem("categories")?JSON.parse(localStorage.getItem("categories")).title:""),document.title=l.value,localStorage.setItem("docTitle",l.value);async function I(){r.$blogApi.resolve("getArticle",u.value).then(e=>{console.log("\u5206\u7C7B\u8BE6\u60C5\u5217\u8868",e),o.value=!1,e!=null&&e.length?(e.length<12?g.value=!0:u.value.page++,e.forEach(t=>{t.created_at=r.$format(t.created_at,"zh_CN").replace(/\s/,"");const d=Math.floor(Math.random()*p.themeColors.length);t.color=p.themeColors[d]}),v.value.push(...e)):e!=null&&e.length?(i.value=!0,o.value=!1):(g.value=!0,n.query.name&&(r.$toast("\u5F53\u524D\u76EE\u5F55\u4E0B\u6CA1\u6709\u6587\u7AE0"),setTimeout(()=>{_.back()},1e3)))}).catch(e=>{console.log("======\u8BF7\u6C42\u5931\u8D25======",e),r.$toast(`\u8BF7\u6C42\u5931\u8D25${e}`),i.value=!0,o.value=!1})}let k=()=>I(),f=()=>{localStorage.removeItem("categories"),_.back()};return(e,t)=>{const d=h("CompList"),L=h("van-list");return y(),C("div",E,[x("div",J,[q(S(c.value)+"\uFF1A ",1),x("span",{class:"cursor",onClick:t[0]||(t[0]=(...s)=>m(f)&&m(f)(...s))},S(l.value),1)]),b(L,{loading:o.value,"onUpdate:loading":t[1]||(t[1]=s=>o.value=s),finished:g.value,"finished-text":"\u6CA1\u6709\u4E86\u54E6 \u0E05 \u0333\u0352\u2022\u02D1\u032B\u2022 \u0333\u0352\u0E05",error:i.value,"onUpdate:error":t[2]||(t[2]=s=>i.value=s),"error-text":"\u8BF7\u6C42\u5931\u8D25\uFF0C\u70B9\u51FB\u91CD\u65B0\u52A0\u8F7D",onLoad:m(k)},{default:T(()=>[v.value.length?(y(),C("div",M,[b(d,{list:v.value},null,8,["list"])])):V("",!0)]),_:1},8,["loading","finished","error","onLoad"])])}}};var w=B(O,[["__scopeId","data-v-7666b76a"]]);export{w as default};
