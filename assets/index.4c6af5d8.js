import{_ as e,a,h as l,x as t,k as s,d as o,o as r,c as n,l as u,n as i,F as c,p as d,q as p,z as v,g}from"./index.3e609359.js";import{p as h}from"./index.d6dbd588.js";const m={key:0,class:"pt-5"},_={key:0,class:"bg-white/50 p-15 grid gap-15 grid-cols-3 box mt-10"};var x=e({__name:"index",setup(e){const{proxy:x}=g(),f=a(),y=l({state:"open",page:1,per_page:100});let b=l(),k=l([]);const $=l();let w=l();t((()=>$.value),(e=>{e&&(clearTimeout(w.value),w.value=setTimeout((()=>C()),500))}));const j=()=>{x.$blogApi.resolve("giteeIssues",y.value).then((e=>{(null==e?void 0:e.length)&&(e.length>=y.value.per_page&&(y.value.page++,j()),e.forEach((e=>{e.created_at=x.$format(e.created_at,"zh_CN").replace(/\s/,"");const a=Math.floor(Math.random()*f.palette.length);e.color=f.palette[a]})),b.value=e)}))};j();const C=()=>$.value?(e=>{k.value=[];const a=`(.*?)${[...e].join("(.*?)")}(.*?)`,l=RegExp(a,"i");k.value=b.value.filter((a=>a.title.includes(e)||l.test(a.title)||l.test(h(a.title,{toneType:"none"})))),!k.value.length&&x.$toast("没有搜索到相关内容")})($.value):x.$toast("请输入搜索内容");return(e,a)=>{const l=s("van-search"),t=s("ArticleCard"),g=s("Loading");return o(b)?(r(),n("div",m,[u(l,{class:"mx-auto max-w-800",modelValue:o($),"onUpdate:modelValue":a[0]||(a[0]=e=>i($)?$.value=e:null),placeholder:"请输入搜索内容",shape:"round",background:"rgba(255, 255, 255, 0)","clear-trigger":"always",onSearch:C,onClear:a[1]||(a[1]=e=>i(k)?k.value=[]:k=[])},null,8,["modelValue"]),o(k).length?(r(),n("div",_,[(r(!0),n(c,null,d(o(k),(e=>(r(),p(t,{key:e.id,article:e},null,8,["article"])))),128))])):v("v-if",!0)])):(r(),p(g,{key:1}))}}},[["__scopeId","data-v-a0fd5576"],["__file","D:/MyWork/blog-vue3/src/views/search/index.vue"]]);export{x as default};
