import{_ as e,a,h as l,i as t,j as o,k as s,o as r,c as n,l as i,m as u,d as c,n as v,b as d,F as p,p as g,q as h,g as f}from"./index.3e609359.js";const _={class:"grid gap-15 grid-cols-3 box"};var x=e({__name:"index",setup(e){const{proxy:x}=f(),m=a(),b=l({state:"open",page:1,per_page:21});let $=l([]),k=l(!1),y=l(!1),C=l(!1),I=l(),M=l();t((()=>I.value.scrollTop=M.value)),o((()=>M.value=I.value.scrollTop));const T=()=>{x.$blogApi.resolve("giteeIssues",b.value).then((e=>{k.value=!1,(null==e?void 0:e.length)?(e.length<21?y.value=!0:b.value.page++,e.forEach((e=>{e.created_at=x.$format(e.created_at,"zh_CN").replace(/\s/,"");const a=Math.floor(Math.random()*m.palette.length);e.color=m.palette[a]})),$.value.push(...e)):(null==e?void 0:e.length)?(C.value=!0,k.value=!1):y.value=!0})).catch((e=>{x.$toast(`请求失败：${e}`),C.value=!0,k.value=!1}))},j=()=>{m.scrollBox=I.value;const e=I.value.scrollHeight-I.value.offsetHeight,a=I.value.scrollTop;m.percentage=parseInt(a/e*100)};return(e,a)=>{const l=s("ArticleCard"),t=s("van-list");return r(),n("div",{class:"select-none vanlist p-15 overflow-auto fixed top-60 left-0 right-0 bottom-0",ref_key:"scrollBox",ref:I,onScroll:j},[i(t,{loading:c(k),"onUpdate:loading":a[0]||(a[0]=e=>v(k)?k.value=e:k=e),error:c(C),"onUpdate:error":a[1]||(a[1]=e=>v(C)?C.value=e:C=e),finished:c(y),"finished-text":`总共 ${c(m).articleCount} 条，没有了哦 ฅ ̳͒•ˑ̫• ̳͒ฅ`,"error-text":"请求失败，点击重新加载",onLoad:T},{default:u((()=>[d("div",_,[(r(!0),n(p,null,g(c($),(e=>(r(),h(l,{key:e.id,article:e},null,8,["article"])))),128))])])),_:1},8,["loading","error","finished","finished-text"])],544)}}},[["__scopeId","data-v-6bda6362"],["__file","D:/MyWork/blog-vue3/src/views/article/index.vue"]]);export{x as default};
